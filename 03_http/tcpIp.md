# tcp/ip + http

## TCP/IP

- 패킷 통신을 위한 인터넷의 규약
- IP는 데이터의 조각들을 최대한 빨리 목적지로 보내는 역할을 함
- 조각들의 순서가 뒤바뀌거나 누락되더라도 크게 상관하지않고 일단 보냄
- TCP는 IP보다 느리지만 도착한 조각을 점검하여 줄을 세우고 망가졌거나 빠진 조각을 다시 요청

### 계층
- 애플리케이션 계층, 트랜스포트 계층, 네트워크 계층, 링크 계층
- 각 계층을 거칠 때마다 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가, 수신측에서는 각 계층을 거칠 때마다 해당 계층을 사용한 헤더를 삭제 => 캡슐화

| 계층              | 클라이언트      | 서버      |
|-------------------|-----------------|-----------|
| 애플리케이션 계층 | HTTP 클라이언트 | HTTP 서버 |
| 트랜스포트 계층   | TCP             | TCP       |
| 네트워크 계층     | IP              | IP        |
| 링크 계층         | 네트워크        | 네트워크  |
- TCP/IP 통신을 할때는 계층을 순서대로 거쳐 상대와 통신을 함
- TCP: 애플리케이션 계층에서 받은 데이터를 통신하기 쉽게 **조각내어** 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달
    - 쓰리웨이 핸드셰이킹(이름이 참) : 패킷을 보내고 끝나는게 아니라 보내졌는지의 여부를 상대에게 확인하러 감(참고로 알아만 둬도 될듯)
- IP : 수신지 MAC 주소를 추가해 링크 계층에 전달, TCP에서 나눠진 패킷을 상대방에게 **전달하는** 역할을 맡음
    - MAC 주소는 라우터, IP주소는 노드(수신지)
    - 수신지 IP주소를 바탕으로 MAC 주소 조사 가능
    - IP 주소 : 컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신을 하기 위해 사용하는 특수한 번호. 노드의 식별 번호. **엄밀하게 IP와는 다르다 IP는 프로토콜 이름임** 
- DNS : HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공 
    - IP 주소와는 별도로 호스트 이름과 도메인 이름을 붙일 수 있음
    - DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로부터 도메인명을 조사하는 서비스를 제공(주소 변환)
    - 그걸 이제 URL이라 하자나여? 그리고 URL은 식별자 이름이라는 뜻의 URI의 섭셋이구
    - URI > URL == IP 쯤 되겠다

## 통신이 되는 순서
1. 클라이언트가 주소창에 URL 입력
2. DNS가 이를 ip주소로 바꿈
3. 클라이언트에서 HTTP 메시지 작성
4. 클라이언트 TCP에서 패킷으로 쪼갬, 패킷에 일련번호 부여
5. 클라이언트 IP에서 수신지 IP 주소로부터 MAC 주소 추론하여 수신지에 데이터를 배송
6. 서버 IP에서 수신
7. 서버 TCP에서 상대방으로부터 패킷을 수신하여 일련번호 보고 조립
8. HTTP 서버에서 리퀘스트 내용을 처리
9. 리퀘스트 처리 결과도 마찬가지로 TCP/IP 통신 순서대로 클라이언트에 반환 

