# SQL - view, 삽입 SQL

## View

```sql
CREATE VIEW 뷰_이름[(속성_리스트)] AS SELECT 문 [WITH CHECK OPTION];
CREATE VIEW 우수고객(고객아이디, 고객이름, 나이) AS SELECT FROM 고객 WHERE 등급='VIP'
CREATE VIEW 우수고객 AS SELECT FROM 고객 WHERE 등급='VIP' WITH CHECK OPTION;

--- 뷰에서 검색
SELECT * FROM 우수고객 WHERE 나이 >= 25;

--- 뷰 삭제
DROP VIEW 뷰_이름;
```

- 뷰 : 다른 테이블을 기반으로 만들어진 가상 테이블이다. 뷰를 가상 테이블이라고 부르는 이유는 일반 테이블과 달리 데이터를 실제로 저장하고 있지 않기 때문이다.
- 물리적으로 존재하면서 실제로 데이터를 저장하는 일반 테이블과는 달라, 뷰는 논리적으로 존재하면서도 일반 테이블과 동일한 방법으로 사용할 수 있다
- 뷰를 통해 쉽게 검색은 할 수 있지만 데이터를 조작하기는 어렵다
- 뷰의 생성과 삭제도 데이터 정의 기능에 해당한다 
- WITH CHECK OPTION으로 설정하면 조건에 맞지 않는 데이터를 삽입하거나 뷰의 정의 조건을 위반하는 수정 및 삭제 연산을 실행하지 않고 거부한다
- 뷰에 대한 SELECT문이 내부적으로는 기본 테이블에 대한 SELECT문으로 변환되어 수행된다
- 집계 함수를 통해 새롭게 속성을 계산한다면, 뷰를 구성하는 속성의 이름을 명확히 제시해야 한다

### 변경 불가능한 뷰의 특징

- 기본 테이블의 기본키를 구성하는 속성이 포함되어있지 않은 뷰는 변경할수 없다
- 기본 테이블에 있는 내용이 아니라 집계함수로 새로 계산된 내용을 포함하고 있는 뷰는 변경할 수 없다
- DISTINCT 키워드를 포함하여 정의한 뷰는 변경할 수 없다
- GROUP BY 포함하여 정의한 뷰는 변경할 수 없다
- 여러 개의 테이블을 조인하여 정의한 뷰는 변경할수 없는 경우가 많다

### 뷰의 장점

- 질의문을 좀 더 쉽게 작성 : 특정 조건들을 이미 만족하는 투플들로 뷰를 만들어놓으면 검색에 용이해진다. where조건을 굳이 또 작성할 필요가 없기 때문에
- 데이터의 보안 유지에 도움이 된다 : 여러 사용자의 요구에 마는 다양한 뷰를 미리 정의해두고 사용자가 자신에게 제공된 뷰를 통해서만 데이터에 접근하도록 권한을 설정하여 일종의 캡슐화를 통한 데이터 보호를 할 수 있다
- 데이터를 좀더 편하게 관리할 수 있다

## 삽입 SQL

- 깊이는 몰라도 되고, RDBMS에 대화식으로 직접 입력하여 수행 결과를 바로 확인할 수 있는 데이터베이스와는 달리, 응용 프로그램 안에 삽입해 사용하는 방법