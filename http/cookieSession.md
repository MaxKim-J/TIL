# 쿠키와 세션

## 쿠키
- http의 약점을 보완하기 위해 사용
    - connectionless : 클라이언트가 요청을 한 후 응답을 받으면 그 연결을 끊어버림
    - stateless : 통신이 끝나면 전에 뭐 보냈는지 전에 뭐 받았는지 전혀모름
- 클라이언트 로컬에 저장되는 키값이 들어간 작은 데이터 텍스트 파일
- expire되는 시간을 명시 가능
- Response Header에 Set-Cookie 속성을 명시하면 클라이언트에 쿠키를 만들 수 있고, 쿠키를 만들면 다음번 요청에 cookie가 request header에 계속 들어옴
- 쿠키는 사용자가 따로 요청하지 않아도 브라우저가 Request 시에 Request Header를 넣어서 자동으로 서버로 전송

## 세션
- 세션은 쿠키 기반으로 만들어졌지만, 사용자 정보 파일을 브라우저에 저장하는 쿠키와는 달리 세션은 서버측에서 관리
- 서버에서는 클라이언트를 구분하기 위해 세션 ID를 부여하여 웹 브라우저가 서버에 접속해서 브라우저를 종료할때까지 인증상태 유지
- 사용자에 대한 정보를 서버에 두기 때문에 쿠키보다 보안이 좋지만, 사용자가 많아질수록 서버 메모리를 많이 차지하게 됨(성능 저하의 요인)
- 클라이언트가 Request를 보내면 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여하고 이것이 세션

### 세션 동작 방식
- 클라이언트가 서버에 접속시 세션 ID를 발급받음
- 클라이언트는 세션 ID에 대해 쿠키를 사용해서 저장하고 가지고 있음
- 서버에 요청할때 쿠키의 세션 ID를 서버에 전달해서 사용
- 서버는 세션 ID를 전달받아서 그걸 통해 세션에 있는 클라이언트 정보를 가져옴
- 클라이언트 정보 가지고 서버 요청 처리해서 클라이언트에게 응답

## 비교
| 비교항목 |                            쿠키                            |                                     세션                                      |
|:--------:|:----------------------------------------------------------:|:-----------------------------------------------------------------------------:|
| 저장위치 |                         클라이언트                         |                                     서버                                      |
| 저장형식 |                            text                            |                                    object                                     |
| 만료시점 | 쿠키 저장시 설정 가능하고(expires) 없으면 브라우저 종료 시 | 클라이언트의 로그아웃, 설정 시간동안 반응이 없으면 무효화, 정확한 시점은 모름 |
|  리소스  |                클라이언트의 리소스(메모리)                 |                             서버의 리소스(메모리)                             |
| 저장위치 |              한 도메인 당 20개, 한 쿠키당 4KB              |                                   제한없음                                    |
